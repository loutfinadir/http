# https://wiki.one.int.sap/wiki/display/OrcaDev/FPA58+-+Triaging+Tickets
# https://github.wdf.sap.corp/orca/dataimportservice
### Get Access Token
https://{{host}}/ppro-firefly-i051401/headers/

### Get CSRF Token
GET https://{{host}}/sap/fpa/services/csrf.xsjs HTTP/1.1
#Path: /sap/fpa/services/csrf.xsjs
X-CSRF-Token: Fetch
Authorization: {{accessToken}}
Content-Type: application/json
Accept: application/json

####
GET https://hana-gateway-sac-orcastarkiller.cfapps.sap.hana.ondemand.com/sap/fpa/services/csrf.xsjs HTTP/1.1
X-CSRF-Token: Fetch
Authorization: {{accessToken}}
Content-Type: application/json
Accept: application/json

### Get Model
GET https://{{host}}/api/v1/dataimport/models/{{modelID}} HTTP/1.1
Authorization: {{accessToken}}
Content-Type: application/json
Accept: application/json

### Get Metadata
GET https://{{host}}/api/v1/dataimport/models/{{modelID}}/metadata HTTP/1.1
Authorization: {{accessToken}}
Content-Type: application/json
Accept: application/json

### Import Data: Creates a new import job with a given import type specified automatically.
POST https://{{host}}/api/v1/dataimport/models/{{modelID}}/factData HTTP/1.1
Authorization: {{accessToken}}
Content-Type: application/json
Accept: application/json

{
    "JobSettings": {
      "importMethod": "Append",
      "executeWithFailedRows": true,
      "ignoreAdditionalColumns": false,
      "reverseSignByAccountType": false
    }
}

### Import as csv
#POST https://dataimportservice-sac-orcastarkiller.cfapps.sap.hana.ondemand.com/import/{{modelID}}/masterData HTTP/1.1
#POST https://{{host}}/api/v1/dataimport/import/{{modelID}}/masterData HTTP/1.1
#x-csrf-token: E2A6ED1E3A2952408F06EECDF46389A1
GET https://dataimportservice-sac-orcastarkiller.cfapps.sap.hana.ondemand.com/jobs HTTP/1.1
x-csrf-token: FF90CF20D441DC46B2C54E55EB27EC43
Authorization: Bearer eyJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vb3JjYXN0YXJraWxsZXIuYXV0aGVudGljYXRpb24uc2FwLmhhbmEub25kZW1hbmQuY29tL3Rva2VuX2tleXMiLCJraWQiOiJqd3Qtc2lnLTIwMjQtMDMtMTkiLCJ0eXAiOiJKV1QiLCJqaWQiOiAiYkhTN3dxc0Z2cEgvcHB3ZklZbFhkR0lCbVhUcjJmRm1ka21lZXlqZ1p2MD0ifQ.eyJqdGkiOiI5MTk4NDU3NDI3ODA0ZGUxYTg5ODZmOTFhMjk5ZGUyMyIsImV4dF9hdHRyIjp7ImVuaGFuY2VyIjoiWFNVQUEiLCJzdWJhY2NvdW50aWQiOiI2NDE0ZTE4Mi0zOWMzLTRlZDQtYjVkMy1jNDlhOWY1ZjQ3OWIiLCJ6ZG4iOiJvcmNhc3RhcmtpbGxlciJ9LCJjbmYiOnsieDV0I1MyNTYiOiJROWRNSzBjQ1J3RXhjSjF1ME1RTGctcm9fcDNYME1JTEdsalN1N2kzYmVjIn0sInN1YiI6InNiLWRhdGFpbXBvcnRzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOSIsImF1dGhvcml0aWVzIjpbImhhbmEtZ2F0ZXdheS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5zZXJ2aWNlIiwidWFhLnJlc291cmNlIiwiaGFuYS14cy1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkuc2FwLmZwYS5zZXJ2aWNlczo6SnFtVGVjaFVzZXIiLCJoYW5hLXhzLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5zYXAuZnBhLnNlcnZpY2VzLnJvbGVzOjpBQ1RJVklUSUVTX1NFUlZJQ0VfVVNFUiIsImhhbmEteHMtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnNhcC5mcGEuc2VydmljZXM6OlRlY2hEYXRhTW90aXZlIiwidGVuYW50LW1hbmFnZW1lbnQtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LlRlbmFudFJlYWQiLCJmZWF0dXJlZmxhZ3NlcnZpY2Utc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LmRhdGFpbXBvcnRzZXJ2aWNlIiwiY29ubmVjdGlvbi1icm9rZXItc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LlRlbmFudFJvbGVQb2xpY3kiLCJkYXRhZXhwb3J0c2VydmljZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5pbXBlcnNvbmF0aW9uIiwiZmVhdHVyZWZsYWdzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5vcmNhLnNlcnZpY2UiLCJ3cmFuZ2xpbmctc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnRlY2huaWNhbENhbGxlciIsImhhbmEteHMtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnNhcC5mcGEuc2VydmljZXM6OkNvbnRlbnRsaWJNYW5hZ2VyIiwiZHdhYXMtY29yZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkuU2FjQ3JlZGVudGlhbHMiLCJkYXRhaW1wb3J0c2VydmljZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5pbXBlcnNvbmF0aW9uIiwiY29ubmVjdGlvbi1icm9rZXItc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LkJyb2tlckNsaWVudCIsImhhbmEteHMtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnNhcC5mcGEuc2VydmljZXM6OkltcGVyc29uYXRlVXNlcnMiLCJsY3Mtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LkRTUFRlY2huaWNhbCIsImxjcy1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkuRFNQVXNlciIsImRhdGFpbXBvcnRzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5vcHMiLCJkYXRhaW1wb3J0c2VydmljZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5kYXRhaW1wb3J0c2VydmljZSIsImhhbmEtZ2F0ZXdheS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5zZXNzaW9uIiwiaGFuYS14cy1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkuc2FwLmZwYS5zZXJ2aWNlczo6Q29udGVudGxpYk1hbmFnZXJDb250ZW50RGF0YVByaXZpbGVnZSIsImhhbmEteHMtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnNhcC5mcGEuc2VydmljZXM6OlRlY2hSRVNUIl0sInNjb3BlIjpbImhhbmEtZ2F0ZXdheS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5zZXJ2aWNlIiwidWFhLnJlc291cmNlIiwiaGFuYS14cy1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkuc2FwLmZwYS5zZXJ2aWNlczo6SnFtVGVjaFVzZXIiLCJoYW5hLXhzLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5zYXAuZnBhLnNlcnZpY2VzLnJvbGVzOjpBQ1RJVklUSUVTX1NFUlZJQ0VfVVNFUiIsImhhbmEteHMtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnNhcC5mcGEuc2VydmljZXM6OlRlY2hEYXRhTW90aXZlIiwidGVuYW50LW1hbmFnZW1lbnQtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LlRlbmFudFJlYWQiLCJmZWF0dXJlZmxhZ3NlcnZpY2Utc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LmRhdGFpbXBvcnRzZXJ2aWNlIiwiY29ubmVjdGlvbi1icm9rZXItc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LlRlbmFudFJvbGVQb2xpY3kiLCJkYXRhZXhwb3J0c2VydmljZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5pbXBlcnNvbmF0aW9uIiwiZmVhdHVyZWZsYWdzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5vcmNhLnNlcnZpY2UiLCJ3cmFuZ2xpbmctc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnRlY2huaWNhbENhbGxlciIsImhhbmEteHMtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnNhcC5mcGEuc2VydmljZXM6OkNvbnRlbnRsaWJNYW5hZ2VyIiwiZHdhYXMtY29yZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkuU2FjQ3JlZGVudGlhbHMiLCJkYXRhaW1wb3J0c2VydmljZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5pbXBlcnNvbmF0aW9uIiwiY29ubmVjdGlvbi1icm9rZXItc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LkJyb2tlckNsaWVudCIsImhhbmEteHMtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnNhcC5mcGEuc2VydmljZXM6OkltcGVyc29uYXRlVXNlcnMiLCJsY3Mtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LkRTUFRlY2huaWNhbCIsImxjcy1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkuRFNQVXNlciIsImRhdGFpbXBvcnRzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5vcHMiLCJkYXRhaW1wb3J0c2VydmljZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5kYXRhaW1wb3J0c2VydmljZSIsImhhbmEtZ2F0ZXdheS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkub3JjYS5zZXNzaW9uIiwiaGFuYS14cy1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkuc2FwLmZwYS5zZXJ2aWNlczo6Q29udGVudGxpYk1hbmFnZXJDb250ZW50RGF0YVByaXZpbGVnZSIsImhhbmEteHMtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5LnNhcC5mcGEuc2VydmljZXM6OlRlY2hSRVNUIl0sImNsaWVudF9pZCI6InNiLWRhdGFpbXBvcnRzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOSIsImNpZCI6InNiLWRhdGFpbXBvcnRzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOSIsImF6cCI6InNiLWRhdGFpbXBvcnRzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOSIsImdyYW50X3R5cGUiOiJjbGllbnRfY3JlZGVudGlhbHMiLCJyZXZfc2lnIjoiNzFiNTdiMjgiLCJpYXQiOjE3MTI4NDU3MjIsImV4cCI6MTcxMjg4ODkyMiwiaXNzIjoiaHR0cHM6Ly9vcmNhc3RhcmtpbGxlci5hdXRoZW50aWNhdGlvbi5zYXAuaGFuYS5vbmRlbWFuZC5jb20vb2F1dGgvdG9rZW4iLCJ6aWQiOiI2NDE0ZTE4Mi0zOWMzLTRlZDQtYjVkMy1jNDlhOWY1ZjQ3OWIiLCJhdWQiOlsidGVuYW50LW1hbmFnZW1lbnQtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5IiwiY29ubmVjdGlvbi1icm9rZXItc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5Iiwic2ItZGF0YWltcG9ydHNlcnZpY2Utc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5IiwiZmVhdHVyZWZsYWdzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOSIsIndyYW5nbGluZy1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkiLCJoYW5hLXhzLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5zYXAuZnBhIiwiaGFuYS1nYXRld2F5LXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5vcmNhIiwiZGF0YWV4cG9ydHNlcnZpY2Utc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5Lm9yY2EiLCJ1YWEiLCJsY3Mtc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5IiwiZmVhdHVyZWZsYWdzZXJ2aWNlLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5vcmNhIiwiZGF0YWltcG9ydHNlcnZpY2Utc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5Lm9yY2EiLCJoYW5hLXhzLXNhYy1vcmNhc3RhcmtpbGxlciF0MjMxOS5zYXAuZnBhLnNlcnZpY2VzIiwiZGF0YWltcG9ydHNlcnZpY2Utc2FjLW9yY2FzdGFya2lsbGVyIXQyMzE5IiwiZHdhYXMtY29yZS1zYWMtb3JjYXN0YXJraWxsZXIhdDIzMTkiXX0.CUzN6ZLe2OZxQ8zqHG1kFWXHroLQB3OSF2Pbp0XV2SABWDc1N_H-O5apVhs8wuYEk_J9aWmd-kUBMpEwK1nwhokv_myMO71fJDyZz6Pz4XENU3xKj-qY_Xmi0JAW-h0KpuD2_EiJ5ZDDevDPDYawxLPPQCUlR5p51CMMG72_IB_T2-5-QbUXstoCbIFHVwo9rVYfDzMWger2et5V5WSpOT3cXjFe4zVEKRZaTEZwrYGRn4-v_80EYdx4TJxxB8iSlhSFBsBh_k9Q0JYxWKhoXFRnIyBZvDqJ4dJgwsQmi3OWogtxzZDZLOFkzd58qcnOoxQb2GPZMP9y28orSgLPTQ
x-sap-boc-impersonated-user: {{impersonatedUser}}
Content-Type: text/csv
Accept: application/json

Version,Date,ExplanationInfluencer,ExplanationInfluencerValue,ExplanationStrength 
public.Actual,202303,TX100,SHP_01,1234.56 
public.Actual,202304,TX101,SHP_02,10.00 

### Import as csv
POST https://{{host}}/api/v1/dataimport/import/{{modelID}}/masterData HTTP/1.1
Authorization: {{accessToken}}
x-csrf-token: FF90CF20D441DC46B2C54E55EB27EC43
Content-Type: text/csv
Accept: application/json

Version,Date,ExplanationInfluencer,ExplanationInfluencerValue,ExplanationStrength 
public.Actual,202303,TX100,SHP_01,1234.56 
public.Actual,202304,TX101,SHP_02,10.00 

### Returns a list of all jobs and their respective status.
GET https://{{host}}/api/v1/dataimport/jobs HTTP/1.1
x-csrf-token: 1e16238e55fc11fd-PnQotswbBGsrDtMpYExOG-E90
Authorization: {{accessToken}}
Content-Type: application/json

###
GET https://{{host}}/api/v1/dataimport/models HTTP/1.1
Authorization: {{accessToken}}
X-Sap-Boc-Approuter: true
Content-Type: application/json
Accept: application/json

### Get Model
GET https://{{host}}/api/v1/dataimport/models/{{modelID}} HTTP/1.1
Authorization: {{accessToken}}
Content-Type: application/json
Accept: application/json


